//! browser-fetch-json v0.2.2
//! MIT License -- https://github.com/center-key/browser-fetch-json
const fetch='object'==typeof window?window.fetch:require('node-fetch'),fetchJson={version:'0.2.2',request:function(a,b,c,d){const e={method:a.toUpperCase(),credentials:'same-origin'};d=Object.assign(e,d);return d.headers=Object.assign({"Content-Type":'application/json',Accept:'application/json'},d.headers),'GET'===d.method&&c?b=b+(b.includes('?')?'&':'?')+Object.keys(c).map(function(a){return a+'='+encodeURIComponent(c[a])}).join('&'):'GET'!==d.method&&c&&(d.body=JSON.stringify(c)),fetchJson.logger&&fetchJson.logger(new Date().toISOString(),d.method,b),fetch(b,d).then(function(a){function b(b){return fetchJson.logger&&fetchJson.logger(new Date().toISOString(),d.method,a.url,a.ok,a.status,a.statusText,c),a.error=!a.ok,a.contentType=c,a.bodyText=b,a}const c=a.headers.get('content-type'),e=/json|javascript/.test(c);return e?a.json():a.text().then(b)})},get:function(a,b,c){return fetchJson.request('GET',a,b,c)},post:function(a,b,c){return fetchJson.request('POST',a,b,c)},put:function(a,b,c){return fetchJson.request('PUT',a,b,c)},patch:function(a,b,c){return fetchJson.request('PATCH',a,b,c)},delete:function(a,b,c){return fetchJson.request('DELETE',a,b,c)},logger:null,enableLogger:function(a){return fetchJson.logger='function'==typeof a?a:!1===a?null:console.log,fetchJson.logger}};'object'==typeof module?module.exports=fetchJson:'object'==typeof window&&(window.fetchJson=fetchJson);